_format_version: "3.0"

services:
  - name: data-storage-service
    url: http://data-storage-service:8001
    routes:
      - name: data-storage-route
        paths:
          - /api/data

  - name: main-frontend
    url: http://main-frontend:80
    routes:
      - name: main-route
        paths:
          - /

  - name: fire-chief-dashboard
    url: http://fire-chief-dashboard:80
    routes:
      - name: fire-chief-route
        paths:
          - /dashboard

  - name: analyst-portal
    url: http://analyst-portal:80
    routes:
      - name: analyst-route
        paths:
          - /analyst

  - name: scientist-workbench
    url: http://scientist-workbench:80
    routes:
      - name: scientist-route
        paths:
          - /scientist

  - name: admin-console
    url: http://admin-console:80
    routes:
      - name: admin-route
        paths:
          - /admin

plugins:
  - name: rate-limiting
    config:
      minute: 100
      hour: 1000

  - name: cors
    config:
      origins: ["*"]
      methods: ["GET", "POST", "PUT", "DELETE", "PATCH", "OPTIONS"]
      headers: ["Accept", "Accept-Version", "Content-Length", "Content-MD5", "Content-Type", "Date", "X-Auth-Token", "Authorization"]
      exposed_headers: ["X-Auth-Token"]
      credentials: true
      max_age: 3600